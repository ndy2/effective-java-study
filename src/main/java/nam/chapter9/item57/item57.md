# Item57 - 지역변수의 범위를 최소화하라


> [!QUOTE] 참고 자료
> - https://www.baeldung.com/java-variable-scope

## 변수의 종류

```java
class SomeClass {
	public static string SOME_STATIC_VARIABLE = "string";
	public int someInstanceVariable;

	public SomeClass(int someParameter) {
		int someLocalVariable = 1;
		this.someInstanceVariable = someLocalVariable+ someParameter;
	}
}
```
![[types-of-variable.png]]
지역 변수란?
- block/ method/ contructor 안에서 정의된 변수
- 매개변수, loop variable 등도 지역 변수이다.
- 해당 block 에서 선언, 생성시 생성되고, block 의 실행이 종료되면 소멸된다.


인스턴스 변수란?
- 클래스 내에서 선언되지만 메서드 밖에서 선언되는 변수 (필드)
- 인스턴스 (객체) 마다 별도의 값이 유지된다.
- 인스턴스와 생명 주기를 같이 함


클래스 변수
- 클래스 내에서 static 키워드로 선언된다.
- 해당 클래스의 모든 인스턴스가 공유하는 변수이다.
- 클래스가 로드될때 생성되고, 프로그램이 종료될 때까지 유지된다.


## 2. 변수의 종류와 GC

Q: 지역변수, 인스턴스 변수, 스태틱 변수를 GC 의 관점에서 설명해줘

1. **지역 변수 (Local Variables):**
    
    - GC 관점에서 지역 변수는 메서드나 블록 내에서만 존재하며, 해당 메서드나 블록이 실행되는 동안에만 유효합니다.
    - 메서드나 블록이 실행을 마치면 해당 지역 변수는 더 이상 필요하지 않으므로 GC의 대상이 됩니다.
    - 지역 변수는 메서드나 블록이 실행을 마치면 스택 메모리에서 제거되어 자동으로 해제됩니다.
2. **인스턴스 변수 (Instance Variables):**
    
    - 인스턴스 변수는 클래스의 인스턴스(객체)와 함께 존재하며, 객체가 메모리에서 사용 중일 때만 유효합니다.
    - GC는 객체가 더 이상 참조되지 않을 때 해당 객체와 그 안에 있는 모든 인스턴스 변수를 수거합니다.
    - 다른 객체가 해당 객체를 더 이상 참조하지 않을 때, GC는 해당 객체를 수거하고 그 안에 있는 인스턴스 변수도 메모리에서 해제합니다.
3. **클래스 변수 (Class Variables 또는 Static Variables):**
    
    - 클래스 변수는 클래스의 모든 인스턴스가 공유하는 변수이므로, 클래스가 로드될 때 생성되고 프로그램이 종료될 때까지 유지됩니다.
    - GC는 프로그램이 종료될 때 클래스 변수들을 해제합니다.
    - 단, 클래스 로더가 해당 클래스를 언로드(unload)하는 경우에는 해당 클래스 변수들도 해제됩니다.
### 클래스 로더의 언로드?

Q: 클래스 로더가 해당 클래스를 언로드 한다는 것에 대해 알려줘 프로그램이 실행 되는 중에 클래스를 언로드 할 수 있니?

클래스 로더가 클래스를 언로드하는 개념은 Java의 특정 환경에서만 발생할 수 있습니다. 일반적으로 자바 표준 런타임(Java Virtual Machine, JVM)에서는 클래스가 한 번 로드되면 해당 클래스는 프로그램이 종료될 때까지 메모리에 유지됩니다. 하지만 몇 가지 특정한 상황에서 클래스가 언로드될 수 있습니다. 이러한 상황은 일반적이지 않으며, 자바 언어의 기본 동작에 큰 영향을 미치지 않습니다.

일부 특정한 환경에서는 클래스 로더가 언로드될 수 있으며, 그로 인해 해당 클래스들도 메모리에서 제거될 수 있습니다. 이는 주로 특정 종류의 애플리케이션 서버나 OSGi(Open Service Gateway initiative)와 같은 동적 모듈 시스템에서 발생합니다.

프로그램이 실행 중에 클래스를 언로드하는 일반적인 상황은 아니며, 자바 애플리케이션을 개발할 때 이를 염두에 두고 코드를 작성할 필요는 없습니다. 대부분의 경우 클래스 로더가 로드한 클래스는 메모리에서 해제되지 않습니다.


## 3. 변수의 범위 (scope)

참고 - https://www.baeldung.com/java-variable-scope

![[scope-of-variable.png]]

많이들 동의 할 것 같은 개인적인 생각 - (의식해서) block scope 를 쓰지 말자.